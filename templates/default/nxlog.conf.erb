PidFile /var/run/nxlog.pid

<Extension syslog>
  Module xm_syslog
</Extension>

<Extension json>
  Module  xm_json
</Extension>

<Input chef-client>
  Module    im_file
  File      "/etc/sv/chef-client/log/main/current"
  exec      $type = "chef_client";
  exec      $host = hostname();
  exec      $tags = "write";
  exec      $message = $raw_event;
  exec      to_json();
</Input>

<Input messages>
  Module    im_file
  File      "/var/log/messages"
  exec      $type = "messages";
  exec      $host = hostname();
  exec      $tags = "write";
  exec      $message = $raw_event;
  exec      to_json();
</Input>

<Output out>
  Module      om_udp
  Port        <%=@udpport%>
  Host        <%=@tcphost%>
  exec        to_json();
</Output>

<Route 1>
  Path  chef-client, messages => out 
</Route>

include /usr/local/etc/nxlog/include/nxlog_nginx.inc
include /usr/local/etc/nxlog/include/nxlog_apache.inc
include /usr/local/etc/nxlog/include/nxlog_tomcat6.inc

