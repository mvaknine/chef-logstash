PidFile /var/run/nxlog.pid

<Extension syslog>
  Module  xm_syslog
</Extension>

<Extension json>
  Module  xm_json
</Extension>

<Input internal>
  Module      im_internal
</Input>

<Input kern>
  Module      im_kernel
  Exec        parse_syslog();
</Input>

include /usr/local/etc/nxlog/include

<Input syslog>
  Module  im_uds
  uds     /dev/log
</Input>

<Input chef-client>
  Module      im_file
  File        '/etc/sv/chef-client/log/main/current'
</Input>

<Output out>
  Module      om_tcp
  Port        <%=@tcpport%>
  Host        <%=@tcphost%>
  Exec        to_json();
</Output>

<Output debugfile>
  Module      om_file
  File        "/var/log/nxlog_messages"
  OutputType  LineBased
</Output>

<Route 1>
  Path      internal, syslog, kern, chef-client   => out
</Route>
